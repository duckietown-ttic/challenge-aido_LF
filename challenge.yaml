challenge: aido1_LF1_r2-v3

title: "[AIDO 1] Lane following (rev 2)"
tags: [aido1, v3]
description: null # load from file challenge.description.md

protocol: aido1_remote2-v3
# remote2: now the wheels velocities are used

date-open: 2018-09-01t21:59:43.10-05:00
date-close: 2019-01-01t21:59:43.10-05:00

roles: {}

scoring:
    scores:
    - name: good_angle_mean
      description: |
        Integral of the lane angle absolute value.
      order: lower-is-better
    - name: valid_direction_mean
      description: |
        Checking that the angle was always less than 60.
      order: lower-is-better
    - name: survival_time_mean
      description: |
          Survival time in seconds.
      order: higher-is-better
    - name: traveled_tiles_mean
      description: |
        Number of tiles traveled
      order: higher-is-better

steps:
  step1-simulation:
    title: Simulation step
    description: ""

    timeout: 10
    evaluation_parameters:
      version: '3'
      services:
        evaluator:
          image: _
          environment:
            solution_parameters:
              env: Duckietown-Lf-Lfv-Navv-Silent-v0

            launcher_parameters:
              challenge: LF
              episodes: 5
              steps_per_episode: 500
              environment: Duckietown-Lf-Lfv-Navv-Silent-v0
              environment-constructor: Simulator
              # passed to the environment
              environment-parameters:
                seed: 123 # random seed
                map_name: loop_pedestrians # loop_obstacles # loop_pedestrians
                max_steps: 500
                domain_rand: 0
                camera_width: 160
                camera_height: 120
                accept_start_angle_deg: 4 # start close to straight
                full_transparency: true
              # passed to the agent in the "misc" field
              agent-info:
                challenge: LF

          build:
            context: ./simulation

        solution:
            image: SUBMISSION_CONTAINER

    features_required:
      # This step requires a GPU - not really
      #      gpu: true
      ram_available_mb: 80
      disk_available_mb: 100

  step2-scoring:
    title: Scoring step
    description: ""

    timeout: 10
    evaluation_parameters:
      version: '3'
      services:
        scorer:
          image: _
          build:
            context: ./scorer


    features_required:
      # this step does not need a GPU
      ram_available_mb: 80
      disk_available_mb: 100

transitions:
  - [START, success, step1-simulation]
  - [step1-simulation, success, step2-scoring]
  - [step1-simulation, failed, FAILED]
  - [step1-simulation, error, ERROR]
  - [step2-scoring, success, SUCCESS]
  - [step2-scoring, failed, FAILED]
  - [step2-scoring, error, ERROR]
